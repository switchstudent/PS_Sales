<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sales Performance Analysis</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
    />
    <style>
      .top-performer {
        color: var(--pico-color-green-500);
        font-weight: bold;
      }
      .medium-performer {
        color: var(--pico-color-blue-500);
        font-weight: bold;
      }
      .low-performer {
        color: var(--pico-color-orange-500);
        font-weight: bold;
      }
      .currency {
        color: var(--pico-color-green-600);
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <header class="container">
      <nav>
        <ul>
          <li><a href="sales-analysis.html">Sales Analysis</a></li>
          <li><a href="all-sales-data.html">All Sales Data</a></li>
        </ul>
      </nav>
      <hgroup>
        <h1>Sales Performance Analysis</h1>
        <p>Quarterly sales analysis using for loops with business analytics</p>
      </hgroup>
    </header>

    <main class="container">
      <section>
        <h2>Best Performance</h2>
        <div id="best-performance"></div>
      </section>
      <section>
        <h2>Top Performers</h2>
        <div id="top-performance"></div>
      </section>
      <section>
        <h2>Sales Averages</h2>
        <div id="quarterly-summary"></div>
      </section>
    </main>

    <footer class="container">
      <small>Learning JavaScript for loops with sales data analysis</small>
    </footer>

    <script>
      const salesData = [
        {
          name: "Rajesh",
          location: "Mumbai",
          q1Sales: 120000,
          q2Sales: 145000,
          q3Sales: 130000,
          q4Sales: 155000,
        },
        {
          name: "Sneha",
          location: "Delhi",
          q1Sales: 90000,
          q2Sales: 110000,
          q3Sales: 95000,
          q4Sales: 120000,
        },
        {
          name: "Arun",
          location: "Chennai",
          q1Sales: 100000,
          q2Sales: 125000,
          q3Sales: 115000,
          q4Sales: 135000,
        },
        {
          name: "Kavita",
          location: "Kolkata",
          q1Sales: 85000,
          q2Sales: 95000,
          q3Sales: 138000,
          q4Sales: 255000,
        },
        {
          name: "Sanjay",
          location: "Mumbai",
          q1Sales: 110000,
          q2Sales: 135000,
          q3Sales: 120000,
          q4Sales: 140000,
        },
        {
          name: "Divya",
          location: "Chennai",
          q1Sales: 95000,
          q2Sales: 120000,
          q3Sales: 110000,
          q4Sales: 130000,
        },
      ];
      function totalavgSales() {
        for (let i = 0; i < salesData.length; i++) {
          const person = salesData[i];
          const totalsales =
            person.q1Sales + person.q2Sales + person.q3Sales + person.q4Sales;
          const averagesales = totalsales / 4;

          person.totalsales = totalsales;
          person.averagesales = averagesales;
        }
      }
      function findbestPerformer() {
        totalavgSales();
        let performer = salesData[0];
        for (let i = 1; i < salesData.length; i++) {
          if (salesData[i].totalsales > performer.totalsales) {
            performer = salesData[i];
          }
        }
        return performer;
      }
      function displaybestPerformer() {
        const Performer = findbestPerformer();
        document.getElementById("best-performance").innerHTML = `<article>
        <header>Best Performer</header>
        <p><strong>Name:</strong>${Performer.name}</p>
        <p><strong>Location:</strong>${Performer.location}</p>
        <footer><strong>Total Sales:₹</strong>${Performer.totalsales}</footer>
        </article>`;
      }
      function topPerform() {
        totalavgSales();
        let TopPerform = [];
        for (let i = 0; i < salesData.length; i++) {
          if (salesData[i].averagesales >= 140000) {
            TopPerform.push(salesData[i]);
          }
        }
        return TopPerform;
      }
      function displayTopPerform() {
        let html = "";
        const topPerformList = topPerform();
        html += `<article><p>Top Performers Summary</p>
        <p><strong>Total No.of Top Performers:</strong>${topPerformList.length}</p> </article>`;

        for (let i = 0; i < topPerformList.length; i++) {
          html += `<article>
              <p>${topPerformList[i].name}</p>
        <p><strong>Location:</strong>${topPerformList[i].location}</p>
        <footer>
          <p><strong>Average Sales:₹</strong>${topPerformList[i].averagesales}</p>
          <p><strong>Total Sales:₹</strong>${topPerformList[i].totalsales}</p>
          </footer>
              </article>`;
          document.getElementById("top-performance").innerHTML = html;
        }
      }
      function calculateavgSales() {
        let q1Total = 0;
        let q2Total = 0;
        let q3Total = 0;
        let q4Total = 0;
        for (let i = 0; i < salesData.length; i++) {
          q1Total += salesData[i].q1Sales;
          q2Total += salesData[i].q2Sales;
          q3Total += salesData[i].q3Sales;
          q4Total += salesData[i].q4Sales;
        }
        const numOfPeople = salesData.length;
        const totalSales = q1Total + q2Total + q3Total + q4Total;
        const totalAverage = totalSales / numOfPeople;

        return {
          q1Average: q1Total / numOfPeople,
          q2Average: q2Total / numOfPeople,
          q3Average: q3Total / numOfPeople,
          q4Average: q4Total / numOfPeople,
          totalSales: totalSales,
          totalAverage: totalAverage,
        };
      }
      function displayAvg() {
        const stats = calculateavgSales();
        document.getElementById("quarterly-summary").innerHTML = `
        <article>
        <header>Quarterly Sales Summary</header>
        <p><strong>Q1 Average Sales:</strong> ₹${stats.q1Average}</p>
        <p><strong>Q2 Average Sales:</strong> ₹${stats.q2Average.toFixed(2)}</p>
       <p><strong>Q3 Average Sales:</strong> ₹${stats.q3Average}</p>
       <p><strong>Q4 Average Sales:</strong> ₹${stats.q4Average.toFixed(2)}</p>
       <footer>
       <p><strong>Total Sales:</strong> ₹${stats.totalSales}</p>
       <p><strong>Total Average Sales:</strong> ₹${stats.totalAverage}</p>
       </footer>
      </article>`;
      }

      function generateAnalysisReport() {
        displaybestPerformer();
        displayTopPerform();
        displayAvg();
      }

      document.addEventListener("DOMContentLoaded", generateAnalysisReport);
    </script>
  </body>
</html>
